<section class="users uk-animation-slide-bottom-medium">

  <!-- title heading -->
  <div class="breadcrumb">
    <h1>Conexiones</h1>
    <div>Panel de configuración</div>
  </div>
  <div class="breadcrumb-separator"></div>
  <!-- end title heading -->

  <!-- card content -->
  <ul class="bb-h-menu uk-subnav uk-subnav-pill uk-animation-slide-bottom-medium"
      uk-switcher="animation: uk-animation-slide-left-small; connect: .bb-container">
    <li><a href="#">Crear usuario</a></li>
    <li><a href="#">Crear conexión</a></li>
  </ul>

  <!-- error -->
  <div class="uk-alert-danger uk-animation-slide-top-small" *ngIf="errorMessage != undefined" uk-alert>
    <a class="uk-alert-close" (click)="clearMessage()" uk-close></a>
    <p>
      <fa-icon [icon]="['fas', 'exclamation-triangle']"></fa-icon>
      <span [innerText]="errorMessage"></span>
    </p>
  </div>
  <!-- end error -->

  <!-- success -->
  <div class="uk-alert-success uk-animation-slide-top-small" *ngIf="successMessage != undefined" uk-alert>
    <a class="uk-alert-close" (click)="clearMessage()" uk-close></a>
    <p>
      <fa-icon [icon]="['fas', 'check-circle']"></fa-icon>
      <span [innerText]="successMessage"></span>
    </p>
  </div>
  <!-- end success -->

  <div class="card uk-animation-slide-bottom-medium">
    <div class="card-body">

      <!-- Switcher container -->
      <ul class="uk-switcher bb-container">

        <!-- User creation -->
        <li>
          <h4 class="bb-title">Formulario de creación de usuario genérico
            <br><small>Todos los campos para la creación de usuario son requeridos</small>
          </h4>

          <form
            #userCreation
            [formGroup]="userCreationGroup"
            [ngClass]="{}"
            (ngSubmit)="submitUserCreation()"
            class="user-creation"
            method="post"
            novalidate>

            <!-- ID user -->
            <div class="group bb-grid">
              <label for="id_user">ID de usuario:</label>
              <div>
                <input type="text"
                       class="uk-input"
                       id="id_user"
                       name="id_user"
                       formControlName="id_user"
                       placeholder=""
                       pInputText (keypress)="onlyNumberKey($event)"
                       mask="999"
                       autocomplete="off"
                       title=""
                       required>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End ID user -->

            <!-- Username -->
            <div class="group bb-grid">
              <label for="username">Nombre usuario:</label>
              <div>
                <input type="text"
                       class="uk-input"
                       id="username"
                       name="username"
                       formControlName="username"
                       placeholder=""
                       autocomplete="off"
                       title=""
                       required>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End username -->

            <!-- Password -->
            <div class="group bb-grid">
              <label for="password">Contraseña:</label>
              <div>
                <input type="password"
                       class="uk-input"
                       id="password"
                       name="password"
                       formControlName="password"
                       placeholder=""
                       autocomplete="off"
                       title=""
                       required>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End password -->

            <!-- Password confirm -->
            <div class="group bb-grid">
              <label for="password_confirm">Confirmar contraseña:</label>
              <div>
                <input type="password"
                       class="uk-input"
                       id="password_confirm"
                       name="password_confirm"
                       formControlName="password_confirm"
                       placeholder=""
                       autocomplete="off"
                       title=""
                       required>
                <div class="s-message error required">Las contraseñas no coinciden.</div>
              </div>
            </div>
            <!-- End password confirm -->

            <!-- submit -->
            <div class="submit-group">
              <button type="submit"
                      class="uk-button bb-b-150 uk-button-primary"
                      [ngClass]="{'bb-b-spinner': loading}"
                      [disabled]="userCreationGroup.invalid || loading">
                <span *ngIf="!loading">Crear usuario</span>
                <span *ngIf="loading" uk-spinner="ratio: 1"></span>
              </button>
            </div>
          </form>
        </li>
        <!-- End user creation -->

        <!-- Connection creation -->
        <li>
          <h4 class="bb-title">Formulario de creación de conexión
            <br><small>Todos los campos para la creación de conexión son requeridos</small>
          </h4>

          <form
            #userConnection
            [ngClass]="{}"
            [formGroup]="userConnectionCreationGroup"
            (ngSubmit)="submitFtpConnection()"
            class="user-connection"
            method="post"
            novalidate>

            <!-- Connection ID -->
            <div class="group bb-grid">
              <label for="connection_id">ID de conexión:</label>
              <div>
                <input type="text"
                       class="uk-input"
                       id="connection_id"
                       name="connection_id"
                       formControlName="connection_id"
                       mask="0999"
                       autocomplete="off"
                       required>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End connection ID -->

            <!-- Connection type -->
            <div class="group bb-grid">
              <label for="connection_type">Tipo de conexión:</label>
              <div>
                <select class="uk-select"
                        id="connection_type"
                        name="connection_type"
                        formControlName="connection_type"
                        required>
                  <option value="" selected disabled hidden>Tipo de conexión</option>
                  <option value="1">FTPS</option>
                </select>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End connection type -->

            <!-- Host name -->
            <div class="group bb-grid">
              <label for="host_name">Nombre de host:</label>
              <div>
                <input type="text"
                       class="uk-input"
                       id="host_name"
                       name="host_name"
                       formControlName="host_name"
                       autocomplete="off"
                       required>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End host name -->

            <!-- Host ip -->
            <div class="group bb-grid">
              <label for="host_ip">IP de host:</label>
              <div>
                <input type="text"
                       class="uk-input"
                       id="host_ip"
                       name="host_ip"
                       mask="IP"
                       formControlName="host_ip"
                       autocomplete="off"
                       required>
                <div class="s-message error required">Ingrese una dirección IP válida.</div>
              </div>
            </div>
            <!-- End host ip -->

            <!-- Place -->
            <div class="group bb-grid">
              <label for="port">Puerto:</label>
              <div>
                <input type="text"
                       class="uk-input"
                       id="port"
                       name="port"
                       mask="00999"
                       formControlName="port"
                       autocomplete="off"
                       required>
                <div class="s-message error required">Ingrese un puerto válido.</div>
              </div>
            </div>
            <!-- End place -->

            <!-- Description -->
            <div class="group bb-grid">
              <label for="description">Descripción:</label>
              <div>
                <textarea class="uk-input"
                          id="description"
                          name="description"
                          formControlName="description"
                          rows="4"
                          style="height:50px"
                          required></textarea>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End description -->

            <!-- User -->
            <div class="group bb-grid">
              <label for="user">Usuario:</label>
              <div>
                <select class="uk-select"
                        id="user"
                        name="user"
                        formControlName="user"
                        required>
                  <option value="" selected disabled hidden>Usuario</option>
                  <option *ngFor="let item of userList" [value]="item.idUsuario"
                          [innerText]="item.nombreUsuario"></option>
                  <option *ngIf="userList.length === 0" disabled>No hay usuarios, cree uno para poder
                    conectarlo
                  </option>
                </select>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End user -->

            <!-- Path -->
            <div class="group bb-grid">
              <label for="path">Ruta:</label>
              <div>
                <input type="text"
                       class="uk-input"
                       id="path"
                       name="path"
                       formControlName="path"
                       autocomplete="off"
                       required>
                <div class="s-message error required">Este campo es requerido.</div>
              </div>
            </div>
            <!-- End path -->

            <!-- submit -->
            <div class="submit-group">
              <button type="submit"
                      class="uk-button bb-b-200 uk-button-primary"
                      [ngClass]="{'bb-b-spinner': loading}"
                      [disabled]="userConnectionCreationGroup.invalid || loading">
                <span *ngIf="!loading">Registrar conexión</span>
                <span *ngIf="loading" uk-spinner="ratio: 1"></span>
              </button>
            </div>
          </form>
        </li>
        <!-- End connection creation -->
      </ul>
      <!-- End switcher container -->

    </div>
  </div>
  <!-- end card content -->

</section>
